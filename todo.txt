* finish all main points of network code and process logic
- est 2 weeks FT

* finish all main points of Resolver One view + WPF graphing
- est 1.5 weeks full time

* read parts of algorithms book chapters 2,3,4,5,6,7, then 10,11,12,13, then 18
* do algorithms bit
- est 2.5 weeks full time

* read algorithms book chapters 22, 29, 34, 35, and a bunch of TSP/MS Solver stuff
* do TSP stuff
- est 1.5 weeks FT

* doc a bit better
- proper index.htm + screenshots
- est 0.5 weeks FT

- ideas from "ideas removed" file - infinite

////
git change log:

right now:
- read about heap sort, quicksort, counting sort, binary search trees, rb trees, b trees, implement them
- read about linear programming, graph problems, tsp, convert C# code to Python


soon:
- people can now send and receive messages, so make a first attempt at adding in all the logic that goes with this (though also still need to do a little more work with regard to keeping track of client/server ids). for client keeping track of server ids, can just store connections in a dict
- shippingcomps need to know distance between ports to work out how long journeys take, and banks need to know to work out how much shipping companies should charge for movements. should use db spatial functions. do this on shippingcomp init and create a dict of all the values, and then include distances in msgs to bank? or maybe create a computed database table with all this data, for use by both shippingcomp and bank. 2nd option is better.
- DecideArrivals and MoveConfirmed in ShippingCompany
- traderClient.Send in ShippingCompany - sent to only one client, also server tcp thread needs to note id of sender for MoveAdvertised 
- Bank interpret movingmsg from shippingcompany - needs to note id of sender

- format for Bank broadcast to trader
a) "buyconfirm,portid,commodid,quantity,warehouseid", sent to only one client
b) "futuresettle,portid,commodid,quantity,warehouseid", sent to only one client

- format for FateAndGuesswork broadcast to Trader, something like:
a) "surplus,portid,commodid,1200,2010-04-15T20:10:00", sent to only one client
b) "shortage,portid,commodid,1200,2010-04-15T20:10:00", sent to only one client

- format traders to shipping companies something like:
a) "advertisemove,warehouseid", sent to only one client, also client tcp thread needs to note id of sender
b) "confirmmove,warehouseid", sent to only one client, also client tcp thread needs to note id of sender

- format from trader to bank something like:
a) "buy,portid,commodid,quantity", also server tcp thread needs to note id of sender
b) "future,portid,commodid,quantity,when", also server tcp thread needs to note id of sender

////

Process logic and networking:
- Trader/ShippingCompany interaction: delay between receiving acceptance of contract for movement of goods and taking contract off broadcast, requiring system of acks and locks
- make sure everything from outline_system_plan.txt is working.
Unit test individual functions
- mega_start.bat script to start all C# processes at once, including algoserver (not Resolver though)
- probably use sql spatial functions to work out distances for freighter travel - both for Bank and for Resolver

///

First two tabs of Resolver sheet (GBM data streams):
- Brownian random walk predicted future graph - present data as a solid line, then a bunch of dashed lines for various possibilities. Should know where real data ends and where actual data begins from ntopupdate

/////

Next two sheets:
3. Historical futures contracts, including details of how relevant prices of all involved values changed between start and end of contract, and profit made (CU)
4. Historical commdity transports, including details of how relevant prices of all involved values changed between start and end of contract, and profit made (CU)

Thirdly, summary data sets:

5. Summary data for each trader, split into time periods
Drop down to select trader
- show name, balance, etc
For each time period, have:
- info on futures
- info on warehouse buys
- profit/loss
- balance at end of period

6. Summary data for each shipping company, split into time periods
Drop down to select company
- shown name of company's country, and its currency, and balance, and stock price
For each time period, have:
- number of different ports served
- average quantity per load
- min quantity in a single load
- max quantity in a single load
- av share price (own currency)
- av share price (USD)
- profit/loss
- balance at end of period

7. Summary data on comparative historical record of countries, split into time periods
Drop down to select country
- name of country's currency
in each time period have
- number of and total value of buys
- number and total value of settled futures
- overall outgoings, overall income, overall profit/loss
- number of futures agreed in period
- average diff between futures settled price in period and price they were agreed at
- average value of currency vs USD


////

Fourthly, extreme contrivedness:
8. Travelling freighter problem

- do lots of reading about it, but as far as the actual solution is concerned just convert the other guy's C# code to Python, and then write comment at top of file explaining how a) the code is just adapted from someone else but b) I really do understand what it is doing
- maybe make some minor modifications to the constraints/problem, so I am having to think a bit more, and doc this on web
- doc: represent all shipping lanes between ports as a graph of interconnected nodes, and do a "travelling freighter problem" solution of shortest route for a freighter to visit each port exactly once. provide a diagram on web.

particularly relevant:
http://iris.gmu.edu/~khoffman/papers/trav_salesman.html
http://code.msdn.microsoft.com/solverfoundation
http://blogs.msdn.com/natbr/archive/2009/04/27/solving-traveling-salesman-problems-using-solver-foundation.aspx
http://blogs.msdn.com/natbr/archive/2009/05/07/solver-foundation-tsp-part-ii-directives-solver-plugins-model-libraries.aspx
http://yetanothermathprogrammingconsultant.blogspot.com/2009/02/ms-solver-foundation-gurobi-2.html
http://yetanothermathprogrammingconsultant.blogspot.com/2009/02/tsp-powerset-formulation.html
http://archive.ite.journal.informs.org/Vol7No1/LeeRaffensperger/
http://blogs.msdn.com/lengningliu/archive/2009/11/04/using-solver-foundation-and-plug-in-solvers-in-ironpython.aspx
http://en.wikipedia.org/wiki/Travelling_salesman_problem
http://en.wikipedia.org/wiki/Priority_queue

also:
http://www.amsterdamoptimization.com/msf.html

///

9. sheet that calls AlgoService sort methods with various combinations of parameters (diff lists, diff algorithms), doing each one for a large number of iterations, and gets returned data on time taken.Mark winner for each category by changing font color.

///

General Resolver things to do:
- make ntopupdate a variable within the sheet, not in settings.py. separate for commod and fx.
- Possibly some vaguely sensible management (decisions on when to reuse + close) of the db connection?

////

Database stuff (needs adding to both a) UML diagram and b) actual SQL scripts):
- make sure names match up UML <-> sql and vice versa

- test data (or maybe just store some real data from system?):
INSERT INTO dbo.FuturesContract
           (TraderID, CommodityID, PortID, Price, Quantity, PurchaseTime, SettlementTime, ActualSetTime)
     VALUES
     ()
GO

INSERT INTO dbo.WarehousedCommodity
           (TraderID, CommodityID, PortID, FuturesContractID, Quantity, PurchasePrice, PurchaseTime, SaleTime, SalePrice, SalePortID)
     VALUES
     ()
GO

INSERT INTO dbo.CommodityTransport
           (ShippingCompanyID, WarehousedCommodityID, DepartureTime, ArrivalTime)
     VALUES
     ()
GO

////

testing:
- write tests for multihead queue and syncqueue
- check for bugs in StatsLib GBMSequence
- unittest only bank can write to db
- make processes do right thing when other processes go down, and have automated tests for all possibilities if differing orders of collapse.
- unittest the algoriths and data structures service
- unittest multiheadqueue
- However multi-thread and multi-process concurrent aspects of program are not suited to normal unit testing frameworks. just write some sort of stress test script - i.e. start loads and loads of processes and look for obvious problems - including crashing and incorrect answers in data. Doc this (inc CV desc)
- database connections should be closed when no longer needed

- use stress test to try to find any bottlenecks that can be optimised away, and if I find any doc this (maybe inc CV desc).
- need to think of some way of checking that servers have not gone out of sync

////

UML diagrams:

SQL:
- add add spatial stuff, table inheritance stuff, correct trigger names
- spatial indexes?
- once project is finished, make sure it matches up with actual schema
- stuff that should be kept in sync includes: add table inheritance stuff, triggers, constraints
- maybe make currency short name the key, or at least make unique
- rearrange to be more tidy

Deployment view:
- are protocol labels OK without being a proper sterotype?
- does anyone else access the db after start up?

////

algorithms bit:
following remote methods

CreateStructure()
args: which structure, list
returns: structure id, time taken

Time results from structure()
args: structureid
returns: structure id, time taken

Time results from sort alg()
args: method, list
returns: time taken

DeleteStructure
args: structure id
returns: success or failure

TimeMethod
method 2: 
1. enum of method to use 2. the list 3. whether to return

- using info both in algos book and database book, have an entirely pointless AlgoServer (including on UML diagram, with a note of explanation) that has functions to create various complex data structures and run various algorithms.

implement the following:
- insertion sort
- merge sort
- heap sort
- quick sort
- randomized quick sort
- counting sort
- hash table
- binary search tree
- red-black tree
- b-tree

It has two types of call, one returns the result, the other just returns how long the procedure took.

- start script for algoserver
- unit test
- does data contract require I use get/set properties? how exactly does data contract work?

///

doc:

One day the description here, description in index.htm, description on CV, and description in Wolfie will all need to be synced...

credit ppl from readme on web

The name is a nod to book Tai Pan, that is the general point is that there are several large trading houses which ferry various goods very long distances, though actually here the trading houses have been split into two distinct entities, the "Shipping companies" who do the actual transporting of goods, and the "traders" who predict surpluses and shortages in the market and buy and sell goods accordingly.

Mention how threads generally a bad idea, used as an exercise here, but in most real projects there are simpler, more reliable alternatives (i.e. asynchronous network read/writes, likely combined with callbacks for when data has finished sending or receiving, or otherwise combined with manual system of asynchronous acknowledgement messages between clients).

doc how even without 5 second delay in taking contracts for movements off broadcast, the multithreaded nature of system would mean it would be possible for two threads to simultaneously accept the same request anyway

- describe use of bank and db as mediator of many interactions in system, mention any other patterns used

short version for CV etc:

•	A C# .NET, SQL Server and Python project. A large number of heterogeneous, multithreaded C# processes interact with each other via TCP sockets. Much of the underlying state of the system is stored in a MS SQL Server instance. The system also includes implementations of B-Trees, Red-Black trees, hash tables, various sorting algorithms, and algorithms for producing various types of statistical distribution.
A user interface to the system is provided in the form of an IronPython-based spreadsheet that makes queries both on the database and on a C# SOAP web service, and calls a seperate C# process to produce interactive graphs of the summary data. The spreadsheet also calls a mathematical optimization framework to solve a simple linear programming problem. The system is partly covered by unit tests, and the documentation for the project includes a variety of UML diagrams. Around 220 hours work so far.

temp version:
•	I am currently working on adding implementations of various complex data structures to one of the processes (B-Trees, hash tables, etc), and on using a mathematical optimization framework to solve a simple linear programming problem. Around 220 hours work so far.


some phrases that could go in web doc:

The front end utilises the spreadsheet/Python "mash up" “Resolver One” to provide analysis of the real time data from the database. The Python spreadsheet uses Microsoft's Solver Foundation to solve a version of the Travelling Salesman Problem, and o provide xxx fixme for some of the stochastic outputs of the system. A local C# program is called by the spreadsheet script to produce realtime WPF graphs on same aspects of this analysis.

One final, especially contrived C# service uses WCF/SOAP to provide a network service that blah blah differing algorithms or data structures  blah blah spreadsheet integ


